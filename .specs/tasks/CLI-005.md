# CLI-005: Fix CLI output streaming - output not showing in real-time

## Goal
Fix the CLI output streaming so that AI CLI tool output (claude, opencode, gemini) is displayed in real-time as it's generated, rather than being buffered until completion.

## Problem
Currently, when running `loopwork run`, the output from the AI CLI tool is not streaming properly. Users cannot see progress in real-time, making it difficult to monitor long-running tasks.

## Requirements

1. **Real-time streaming**: Output from spawned CLI processes should appear immediately
2. **No buffering**: Avoid buffering that delays output display
3. **Preserve formatting**: Maintain proper line breaks and formatting from the CLI tool
4. **Log file sync**: Streaming output should also be written to log files in real-time

## Investigation Areas

1. **`packages/loopwork/src/core/cli.ts`** - CliExecutor class
   - Check `Bun.spawn` options for stdio handling
   - Verify `stdout` and `stderr` pipe configuration
   - Review async iteration over output streams

2. **`packages/loopwork/src/core/utils.ts`** - StreamLogger class
   - Check buffering behavior in `write()` method
   - Verify `flush()` is called appropriately
   - Review line buffering logic

3. **Process spawn options**
   - Ensure `stdout: 'pipe'` and `stderr: 'pipe'` are set correctly
   - Check if there's any additional buffering layer

## Acceptance Criteria

- [ ] Running `loopwork run` shows AI CLI output in real-time
- [ ] Output appears character-by-character or line-by-line as generated
- [ ] No noticeable delay between AI generating output and it appearing
- [ ] Log files are also updated in real-time
- [ ] Works for all supported CLI tools (claude, opencode, gemini)
