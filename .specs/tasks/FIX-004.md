# FIX-004: Fix Safety Plugin Error Propagation

## Goal
Debug and fix error handling in Safety Plugin. Ensure that when 'riskEngine' blocks a task, the error is correctly propagated to match test expectations. Handle cases where non-Error objects might be thrown or returned as undefined.
## Files
- `packages/loopwork/src/plugins/safety.ts`
- `packages/loopwork/test/safety-plugin.test.ts`
**Estimated Time:** 45 min
**Complexity:** ★★★☆☆ (3/5)

## Requirements
- Implement the functionality described above
- Follow existing code patterns and conventions
- Add appropriate error handling
## Edge Cases to Handle
- Risk engine returning undefined vs throwing
- Non-standard error objects

## Success Criteria
- [ ] Feature implemented as described
- [ ] Code follows project conventions
- [ ] No new errors or warnings introduced
## Test Strategy
Run bun test packages/loopwork/test/safety-plugin.test.ts. Verify 'blocked by safety policy' error is correctly caught.
